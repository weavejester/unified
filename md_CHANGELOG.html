<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
	<head>
		<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
		<meta http-equiv="X-UA-Compatible" content="IE=9"/>
		<meta name="generator" content="Doxygen 1.8.17"/>
		<meta name="viewport" content="width=device-width, initial-scale=1"/>
		<title>NWNX:EE: Changelog</title>
                <link href="logo-transparent.png" rel="shortcut icon" type="image/x-icon">
                <link href="logo-transparent.png" rel="apple-touch-icon-precomposed">
		<link href="tabs.css" rel="stylesheet" type="text/css"/>
		<script type="text/javascript" src="jquery.js"></script>
		<script type="text/javascript" src="dynsections.js"></script>
		<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtreedata.js"></script>
<script type="text/javascript" src="navtree.js"></script>
		<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
  $(document).ready(function() { init_search(); });
/* @license-end */
</script>
		<link href="doxygen.css" rel="stylesheet" type="text/css" />
		<link href="custom.css" rel="stylesheet" type="text/css"/>
	</head>
	<body>
	<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
		<div id="titlearea">
			<table cellspacing="0" cellpadding="0">
				<tbody>
					<tr style="height: 56px;">
						<td id="projectlogo"><img width="80" height="74" alt="Logo" src="logo-transparent.png"/></td>
						<td id="projectalign" style="padding-left: 0.5em;">
							<div id="projectname">NWNX:EE
								&#160;<span id="projectnumber">8193.20</span>
							</div>
						</td>
						<td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
</td>
					</tr>
				</tbody>
			</table>
		</div>
		<!-- end header part -->
<!-- Generated by Doxygen 1.8.17 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search');
/* @license-end */
</script>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(document).ready(function(){initNavTree('md_CHANGELOG.html',''); initResizable(); });
/* @license-end */
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Changelog </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>All notable changes to this project will be documented in this file.</p>
<p>The format is based on <a href="https://keepachangelog.com/en/1.0.0/">Keep a Changelog</a>.</p>
<h1><a class="anchor" id="autotoc_md8"></a>
8193.20-HEAD</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.20...HEAD">https://github.com/nwnxee/unified/compare/build8193.20...HEAD</a></p>
<h2><a class="anchor" id="autotoc_md9"></a>
Added</h2>
<ul>
<li>Events: added <code>NWNX_ON_INPUT_EMOTE_*</code> events to InputEvents, this event fires when a player uses a radial menu emote.</li>
<li>Experimental: Added <code>NWNX_EXPERIMENTAL_DISABLE_LEVELUP_VALIDATION</code> to disable levelup validation.</li>
<li>Experimental: Added <code>NWNX_EXPERIMENTAL_UNHARDCODE_RANGER_DUALWIELD</code> to remove the hardcoded effects of the Ranger's Dual-wield feat. This functionality is not compatible with the NWNX_ON_HAS_FEAT_* event.</li>
<li>Tweaks: Added <code>NWNX_TWEAKS_ALWAYS_RETURN_FULL_DEX_STAT</code> to have GetDEXStat() always return a creature's full dexterity stat.</li>
<li>Tweaks: added <code>NWNX_TWEAKS_DISPLAY_NUM_ATTACKS_OVERRIDE_IN_CHARACTER_SHEET</code> to display the correct amount of attacks per round on the character sheet when overridden with SetBaseAttackBonus()</li>
</ul>
<h4><a class="anchor" id="autotoc_md10"></a>
New Plugins</h4>
<ul>
<li>SWIG: Native Interop support added for DotNET.</li>
</ul>
<h4><a class="anchor" id="autotoc_md11"></a>
New NWScript Functions</h4>
<ul>
<li>Creature: ComputeSafeLocation()</li>
<li>Creature: DoPerceptionUpdateOnCreature()</li>
<li>Encounter: GetGeometry()</li>
<li>Encounter: SetGeometry()</li>
<li>Util: GetInstructionLimit()</li>
<li>Util: {Get|Set}InstructionsExecuted()</li>
</ul>
<h2><a class="anchor" id="autotoc_md12"></a>
Changed</h2>
<ul>
<li>Creature: Functions for CriticalMultipler and CriticalRange extended to allow declaration of nBaseItem. Order of Overrides is Specified Baseitem &gt; Specified Hand &gt; non-Specified. Modifiers now apply in addition to overrides (rather than only in the absence of overrides). <em><b>ABI breaking:</b> You will need to update <a class="el" href="nwnx__creature_8nss.html">nwnx_creature.nss</a> if you are using these functions</em>.</li>
</ul>
<h2><a class="anchor" id="autotoc_md13"></a>
Deprecated</h2>
<ul>
<li>Data: The NWNX_Data array implementation is deprecated. SQLite implementation available. Shim include file provided for compatibility.</li>
</ul>
<h2><a class="anchor" id="autotoc_md14"></a>
Removed</h2>
<ul>
<li>N/A</li>
</ul>
<h2><a class="anchor" id="autotoc_md15"></a>
Fixed</h2>
<ul>
<li>N/A</li>
</ul>
<h1><a class="anchor" id="autotoc_md16"></a>
8193.16</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.16...build8193.20">https://github.com/nwnxee/unified/compare/build8193.16...build8193.20</a></p>
<h2><a class="anchor" id="autotoc_md17"></a>
Added</h2>
<ul>
<li>Chat: targeted messages can now be sent on the Party or DM channels</li>
<li>Core: log file and crash dumps now include version and commit sha information</li>
<li>Core: added support for cp1251 (Central European) locale</li>
<li>Events: added skippable Acquire events to ItemEvents</li>
<li>Events: added skippable Disarm event to CombatEvents</li>
<li>Events: added <code>ACTION_RESULT</code> to Feat/Skill/Lock events for use in the _AFTER</li>
<li>Events: added Spell Interruption events to SpellEvents</li>
<li>Events: added skippable Has Feat event to FeatEvents</li>
<li>Events: added Journal Open/Close events to JournalEvents</li>
<li>Events: added Detect Mode event to StealthEvents</li>
<li>Events: added Combat Enter/Exit events to CombatEvents</li>
<li>Events: Stealth Mode can now bypass or perform Hide in Plain Sight with return values of "0" or "1" respectively</li>
<li>Events: Added Skippable/Result Changeable Faction Reputation event to FactionEvents</li>
<li>Experimental: Added <code>NWNX_EXPERIMENTAL_ADJUST_REPUTATION_FIX</code> in an effort to correct a crash with factions/reputation</li>
<li>Tweaks: <code>NWNX_TWEAKS_HIDE_PLAYERS_ON_CHAR_LIST</code></li>
<li>Tweaks: <code>NWNX_TWEAKS_FIX_ARMOR_DEX_BONUS_UNDER_ONE</code></li>
<li>Tweaks: <code>NWNX_TWEAKS_FIX_ITEM_NULLPTR_IN_CITEMREPOSITORY</code></li>
<li>Tweaks: <code>NWNX_TWEAKS_CLEAR_SPELL_EFFECTS_ON_TURDS</code></li>
</ul>
<h4><a class="anchor" id="autotoc_md18"></a>
New Plugins</h4>
<p>The following plugins were added:</p><ul>
<li>Feat: Allows to define a variety of effects that are granted to feat holders.</li>
<li>Tileset: An advanced plugin that exposes additional tileset and tile properties and allows builders to override the tiles of an area created with CreateArea().</li>
<li>Diagnostics: Plugin exposing diagnostic facilities to help server debugging.</li>
</ul>
<h4><a class="anchor" id="autotoc_md19"></a>
New NWScript Functions</h4>
<ul>
<li>Area: GetTileInfo()</li>
<li>Area: ExportARE()</li>
<li>Creature: {Get|Set}WalkAnimation()</li>
<li>Creature: SetAttackRollOverride()</li>
<li>Creature: SetParryAllAttacks()</li>
<li>Creature: {Get|Set}NoPermanentDeath()</li>
<li>Events: ToggleIDWhitelist()</li>
<li>Events: AddIDToWhitelist()</li>
<li>Events: RemoveIDFromWhitelist()</li>
<li>Feat: SetFeatModifier()</li>
<li>Object: GetCurrentAnimation()</li>
<li>Player: AddCustomJournalEntry() and GetJournalEntry()</li>
<li>Player: CloseStore()</li>
<li>Race: SetFavoredEnemyFeat()</li>
<li>Util: GetScriptParamIsSet()</li>
<li>Util: SetDawnHour()</li>
<li>Util: SetDuskHour()</li>
</ul>
<h2><a class="anchor" id="autotoc_md20"></a>
Changed</h2>
<ul>
<li>Area: ExportGIT() now supports valid custom resource directory aliases.</li>
<li>DotNET: Upgraded to Dotnet-5.</li>
<li>Events: <code>NWNX_ON_DM_SPAWN_OBJECT_*</code> now provides the resref as event data.</li>
<li>Events: <code>NWNX_ON_STORE_REQUEST_*_AFTER</code> now provides the result as event data.</li>
<li>Events: ResourceEvents now support valid custom resource directory aliases.</li>
<li>Util: added an optional appearance type parameter to CreateDoor()</li>
<li>Util: AddScript(), AddNSSFile() and RemoveNWNXResourceFile() now support valid custom resource directory aliases.</li>
<li>Visibility: added two new visibility types to always show an object regardless of range.</li>
<li>Weapon: Good Aim Feat now takes value from ruleset.2da</li>
<li>We now only allow builds with the <code>CMAKE_BUILD_TYPE=RelWithDebInfo</code> configuration. <code>Debug</code> builds produce unexpected behaviour and <code>Release</code> builds are generally unnecessary and mess with Assert functionality.</li>
</ul>
<h2><a class="anchor" id="autotoc_md21"></a>
Deprecated</h2>
<ul>
<li>Events: Stealth Events have had their name changed from NWNX_ON_{ENTER|EXIT}_STEALTH_* to NWNX_ON_STEALTH_{ENTER|EXIT}_*. Please update your scripts as the old names will eventually be removed.</li>
<li>Tweaks: <code>NWNX_TWEAKS_HIDE_DMS_ON_CHAR_LIST</code> has been deprecated, use <code>NWNX_TWEAKS_HIDE_PLAYERS_ON_CHAR_LIST</code> now</li>
</ul>
<h2><a class="anchor" id="autotoc_md22"></a>
Removed</h2>
<ul>
<li>Optimizations: <code>OBJECT_TAG_LOOKUP</code> optimization has been removed. It caused instability and didn't really improve perf.</li>
</ul>
<h2><a class="anchor" id="autotoc_md23"></a>
Fixed</h2>
<ul>
<li>Administration: fix crash in DeletePlayerCharacter()</li>
<li>Core: debug dumps now properly resolve nwserver functions regardless of path and binary name used</li>
<li>Creature: removed an unnecessary free() in GetMeetsFeatRequirements() that may have led to crashes</li>
<li>Events: fixed a nullptr deref crash in BarterEvents</li>
<li>Events: fixed a nullptr deref crash in the AcquireItem event</li>
<li>Feedback: fixed a bug where global combatlog and journal feedback message overrides couldn't be removed</li>
<li>MaxLevel: fixed bug interfering with leveling down NPCs</li>
<li>MaxLevel: fixed an issue with the plugin failing after a restart when reload-when-empty was set to true</li>
<li>Object: fixed a possible crash in CheckFit()</li>
<li>Player: fixed bic getting overwritten when using PossessCreature() and crashing in between areas</li>
<li>Race: fixed effect clean up after level up</li>
<li>Rename: community name only obfuscates once a server reset</li>
<li>Rename: properly updates original name if <a class="el" href="group__creature.html#ga1ca18c6575ef041368e50f978441e7ca" title="Set the original first or last name of creature.">NWNX_Creature_SetOriginalName()</a> is used</li>
<li>SkillRanks: fixed skill bonus for abilities not properly calculating when ability scores were negative</li>
<li>Weapon: fixed bug in SetGreaterWeaponFocusFeat()</li>
<li>Weapon: fixed bug in offhand attack and damage bonus calculations with Greater Weapon feats and two handed weapons</li>
</ul>
<h1><a class="anchor" id="autotoc_md24"></a>
8193.16</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.13...build8193.16">https://github.com/nwnxee/unified/compare/build8193.13...build8193.16</a></p>
<h2><a class="anchor" id="autotoc_md25"></a>
Added</h2>
<ul>
<li>Core: added environment variable <code>NWNX_CORE_CUSTOM_RESMAN_DEFINITION</code> to specify a file with additional resource directories.</li>
<li>Events: added skippable PlayerDM Login/Logout events to DMActionEvents</li>
<li>Events: added skippable RunScript and RunScriptChunk events to DebugEvents</li>
<li>Events: added skippable RequestBuy/Sell events to StoreEvents</li>
<li>Events: added skippable Heal events to new HealingEvents</li>
<li>Events: added ServerSendArea event to ClientEvents</li>
<li>Tweaks: added <code>NWNX_TWEAKS_BLOCK_DM_SPAWNITEM</code> to block the usage of dm_spawnitem</li>
<li>Weapon: added 'NWNX_WEAPON_GOOD_AIM_SLING' non-halfling sling users with the feat Good Aim gain an additional +1 AB as a halfling currently does. Note: Throwing weapons are already included in the base game</li>
</ul>
<h4><a class="anchor" id="autotoc_md26"></a>
New NWScript Functions</h4>
<ul>
<li>Area: AddObjectToExclusionList()</li>
<li>Area: RemoveObjectFromExclusionList()</li>
<li>Area: ExportGIT()</li>
<li>Creature: {Get|Set}Encounter()</li>
<li>Creature: SetEffectIconFlashing()</li>
<li>Creature: OverrideDamageLevel()</li>
<li>Creature: GetIsBartering()</li>
<li>Creature: {Get|Set}LastItemCasterLeve()</li>
<li>Creature: GetArmorClassVersus()</li>
<li>Effect: ReplaceEffect()</li>
<li>Player: ToggleDM()</li>
<li>ItemProperty: GetActiveProperty()</li>
<li>Object: DoSpellImmunity()</li>
<li>Object: DoSpellLevelAbsorption()</li>
<li>Object: SetHasInventory()</li>
<li>Player: SetObjectMouseCursorOverride()</li>
<li>Player: SetObjectHiliteColorOverride()</li>
<li>Player: RemoveEffectFromTURD()</li>
<li>Player: SetSpawnLocation()</li>
<li>Player: SendDMAllCreatorLists()</li>
<li>Util: GetWorldTime()</li>
<li>Util: {Get|Set}ResourceOverride()</li>
<li>Weapon: {Get|Set}OneHalfStrength()</li>
</ul>
<h2><a class="anchor" id="autotoc_md27"></a>
Changed</h2>
<ul>
<li>Administration: added an optional sKickReason parameter to DeleteCharacter()</li>
<li>Damage: damage event script now also triggered by damage to placeables</li>
<li>Effect: (Un)PackEffect now supports vector params</li>
<li>Events: added a <code>RESULT</code> event data tag to LearnScroll in ItemEvents</li>
<li>Weapon: SetWeapon****Feat functions may be called multiple times for the same weapon, associating a new feat each time</li>
<li>Weapon: weapon feats defined in the 2da are no longer overridden by SetWeapon****Feat and will be used in addition to any set feats</li>
</ul>
<h2><a class="anchor" id="autotoc_md28"></a>
Deprecated</h2>
<ul>
<li>Object: StringToObject();</li>
</ul>
<h2><a class="anchor" id="autotoc_md29"></a>
Removed</h2>
<ul>
<li>Creature: {Get|Set}{ClericDomain|WizardSpecialization}()</li>
<li>Creature: SetAbilityScore()</li>
<li>Object: {Get|Set|Delete}Persistent{Int|String|Float}()</li>
</ul>
<h2><a class="anchor" id="autotoc_md30"></a>
Fixed</h2>
<ul>
<li>Administration: DeletePlayerCharacter() now deletes the TURD as well</li>
<li>Creature: SetMovementRate() now properly reattaches the creature's legs when switching from NWNX_CREATURE_MOVEMENT_RATE_IMMOBILE to the other constants</li>
</ul>
<h1><a class="anchor" id="autotoc_md31"></a>
8193.14</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.13...build8193.14">https://github.com/nwnxee/unified/compare/build8193.13...build8193.14</a></p>
<h2><a class="anchor" id="autotoc_md32"></a>
Added</h2>
<ul>
<li>ServerLogRedirector: added environment variable <code>NWNX_SERVERLOGREDIRECTOR_HIDE_VALIDATEGFFRESOURCE_MESSAGES</code> to hide <code>*** ValidateGFFResource sent by user.</code> messages from the NWNX log.</li>
<li>Events: added BroadcastSpellCast event to SpellEvents</li>
<li>Events: added TogglePause to InputEvents</li>
<li>Tweaks: added <code>NWNX_TWEAKS_FIX_UNLIMITED_POTIONS_BUG</code> to prevent the unlimited potions/scrolls bug.</li>
<li>Tweaks: added <code>NWNX_TWEAKS_UNHARDCODE_SHIELDS</code> to change shield AC and create new shield-like items using the BaseAC column in baseitems.2da.</li>
</ul>
<h4><a class="anchor" id="autotoc_md33"></a>
New NWScript Functions</h4>
<ul>
<li>Creature: {Get|Set}CriticalMultiplier{Modifier|Override}() and {Get|Set}CriticalRange{Modifier|Override}()</li>
<li>Creature: AddAssociate()</li>
<li>Encounter: GetNumberOfSpawnPoints()</li>
<li>Encounter: GetSpawnPointByIndex()</li>
<li>Encounter: GetMinNumSpawned()</li>
<li>Encounter: GetMaxNumSpawned()</li>
<li>Encounter: GetCurrentNumSpawned()</li>
<li>Object: GetDoorHasVisibleModel()</li>
<li>Object: GetIsDestroyable()</li>
<li>Object: GetCurrentHitPoints()</li>
<li>Player: SetCustomToken()</li>
<li>Player: SetCreatureNameOverride()</li>
<li>Player: FloatingTextStringOnCreature();</li>
<li>Util: CreateDoor()</li>
<li>Util: SetItemActivator()</li>
</ul>
<h2><a class="anchor" id="autotoc_md34"></a>
Changed</h2>
<ul>
<li>Object: SetPosition() now has a toggle(default true) to update subareas if oObject is a creature, this means any traps/triggers at the new position will fire their events.</li>
<li>Object: <code>GetLocalVariable()</code> behavior has changed. See function documentation for details.</li>
<li>Profiler: Corrected a typo preventing the retrieval of certain event data (OVERHEAD_COMPENSTION_FORCE -&gt; OVERHEAD_COMPENSATION_FORCE). Note: breaking change.</li>
</ul>
<h2><a class="anchor" id="autotoc_md35"></a>
Fixed</h2>
<ul>
<li>Core: fixed NWNX ResourceDirectory init crashing on failed module load</li>
<li>ELC: fixed ELC not respecting <code>CHARGEN_BASE_ABILITY_*</code> ruleset.2da values</li>
<li>Weapon: fixed a nullptr reference crash in GetEpicWeaponDevastatingCritical()</li>
<li>Player: fixed possessed associates from losing their associate type on unpossess</li>
</ul>
<h1><a class="anchor" id="autotoc_md36"></a>
8193.13</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.12...build8193.13">https://github.com/nwnxee/unified/compare/build8193.12...build8193.13</a></p>
<h2><a class="anchor" id="autotoc_md37"></a>
Added</h2>
<h4><a class="anchor" id="autotoc_md38"></a>
New NWScript Functions</h4>
<ul>
<li>Creature: JumpToLimbo()</li>
</ul>
<h2><a class="anchor" id="autotoc_md39"></a>
Fixed</h2>
<ul>
<li>SkillRanks: Now respects ruleset.2da values.</li>
</ul>
<h1><a class="anchor" id="autotoc_md40"></a>
8193.12</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.11...build8193.12">https://github.com/nwnxee/unified/compare/build8193.11...build8193.12</a></p>
<h2><a class="anchor" id="autotoc_md41"></a>
Added</h2>
<ul>
<li>Events: added QuickbarSetButton event to QuickbarEvents</li>
<li>Events: added Calendar events for change in Hour, Day, Month, Year, and Dawn/Dusk.</li>
<li>Tweaks: <code>NWNX_TWEAKS_FIX_DISPEL_EFFECT_LEVELS</code> to enable a fix for effects losing the caster level vs. dispel checks when the effect creator is deleted.</li>
<li>Tweaks: <code>NWNX_TWEAKS_ADD_PRESTIGECLASS_CASTER_LEVELS</code> to automatically add caster levels from prestige classes based on the {Arc|Div}SpellLvlMod columns in classes.2da</li>
</ul>
<h4><a class="anchor" id="autotoc_md42"></a>
New NWScript Functions</h4>
<ul>
<li>Creature: GetFlatFooted()</li>
<li>Creature: {Serialize|Deserialize}Quickbar()</li>
<li>Creature: {Get|Set}CasterLevelModifier() and {Get|Set}CasterLevelOverride()</li>
<li>Object: ClearSpellEffectsOnOthers()</li>
<li>Object: PeekUUID()</li>
</ul>
<h2><a class="anchor" id="autotoc_md43"></a>
Changed</h2>
<ul>
<li>ELC: Updated with recent changes.</li>
</ul>
<h1><a class="anchor" id="autotoc_md44"></a>
8193.11</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.10...build8193.11">https://github.com/nwnxee/unified/compare/build8193.10...build8193.11</a></p>
<h2><a class="anchor" id="autotoc_md45"></a>
Added</h2>
<ul>
<li>Events: Added Keyboard Input event to InputEvents</li>
<li>Events: Added Use Item validation event to allow control of item use restrictions, and unusable red inventory highlight.</li>
<li>Events: Added Equip Item validation event to allow control of item equip restrictions.</li>
<li>Events: Added OnExportCharacter event to ClientEvents</li>
</ul>
<h2><a class="anchor" id="autotoc_md46"></a>
Changed</h2>
<ul>
<li>Events: "You cannot use that item" feedback can now be suppressed for skipped Use Item events by setting the event result to 1</li>
<li>Rename: Added the environment variable <code>NWNX_RENAME_OVERWRITE_DISPLAY_NAME</code> to control whether display names should be overwritten globally (for scripts and DMs) when global override is set. Then new default is now <code>false</code>, meaning that global overrides are only applied to players, and DMs and scripts see the original name by default.</li>
<li>Core: Stack traces will now resolve base game functions</li>
</ul>
<h2><a class="anchor" id="autotoc_md47"></a>
Fixed</h2>
<ul>
<li>MaxLevel: Fixed a crash when a PC had exactly 41 levels in bard/sorcerer.</li>
<li>Player: <a class="el" href="group__player.html#ga17e50dc03d386cd9f5412a0063dbb9f3" title="Override the name of placeable for player only.">NWNX_Player_SetPlaceableNameOverride()</a> once again updates in realtime.</li>
</ul>
<h1><a class="anchor" id="autotoc_md48"></a>
8193.10</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.9...build8193.10">https://github.com/nwnxee/unified/compare/build8193.9...build8193.10</a></p>
<h2><a class="anchor" id="autotoc_md49"></a>
Added</h2>
<ul>
<li>SQL: Added optional support for object storage in binary fields via an optional parameter <code>base64</code> in <code>NWNX_SQL_PreparedObjectFull</code> and <code>NWNX_SQL_ReadFullObjectInActiveRow</code></li>
<li>Events: Added OnServerCharacterSave events to ClientEvents. Called when a server vault character will be saved either manually, or when the server saves/exits.</li>
<li>ELC: Added <code>NWNX_ON_ELC_VALIDATE_CHARACTER_{BEFORE|AFTER}</code> events, can be subscribed to with NWNX_Events.</li>
<li>Events: Added skippable CastSpell event to InputEvents, the WalkToWayPoint and AttackObject events are also skippable now</li>
</ul>
<h4><a class="anchor" id="autotoc_md50"></a>
New NWScript Functions</h4>
<ul>
<li>Creature: GetFeatGrantLevel()</li>
<li>Object: GetInternalObjectType()</li>
<li>Util: GetUserDirectory()</li>
<li>Util: PluginExists()</li>
<li>Util: GetScriptReturnValue()</li>
<li>Object: AcquireItem()</li>
<li>Object: SetFacing()</li>
</ul>
<h2><a class="anchor" id="autotoc_md51"></a>
Deprecated</h2>
<ul>
<li>Creature: Get{Domain|Specialization}</li>
</ul>
<h1><a class="anchor" id="autotoc_md52"></a>
8193.9</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.7...build8193.9">https://github.com/nwnxee/unified/compare/build8193.7...build8193.9</a></p>
<h2><a class="anchor" id="autotoc_md53"></a>
Added</h2>
<ul>
<li>SQL: <code>NWNX_SQL_PORT</code> to set the port used for MySQL database connections.</li>
<li>Events: Added OnResource{Added|Removed|Modified} events to ResourceEvents, these events fire when a file gets added/removed/modified in the /nwnx or /development folders</li>
</ul>
<h4><a class="anchor" id="autotoc_md54"></a>
New NWScript Functions</h4>
<ul>
<li>Administration: GetServerName()</li>
<li>Events: UnsubscribeEvent()</li>
<li>Creature: Get|SetFaction()</li>
<li>Util: (Un)RegisterServerConsoleCommand()</li>
<li>Area: GetTileModuleResRef()</li>
</ul>
<h2><a class="anchor" id="autotoc_md55"></a>
Changed</h2>
<ul>
<li>Core: the console commands <code>eval</code> and <code>evalx</code> will now provide an error message if the script chunk fails to execute.</li>
<li>Damage: Added a Ranged flag to <a class="el" href="group__damage.html#gac2fbf4ab0070f31b5fde15a4afc29a99" title="Deal damage to a target.">NWNX_Damage_DealDamage()</a></li>
</ul>
<h2><a class="anchor" id="autotoc_md56"></a>
Removed</h2>
<ul>
<li>Tweaks: Removed scroll learning freeze bugfix.</li>
</ul>
<h2><a class="anchor" id="autotoc_md57"></a>
Fixed</h2>
<ul>
<li>Optimizations: GameObjectLookup no longer breaks <code><a class="el" href="group__util.html#ga4dc71b0421a9bf57e18aa42b177d9b4b" title="Get the last created object.">NWNX_Util_GetLastCreatedObject()</a></code> and <code>NWNX_ON_DM_SPAWN_OBJECT</code> functionality.</li>
</ul>
<h1><a class="anchor" id="autotoc_md58"></a>
8193.7</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.6...build8193.7">https://github.com/nwnxee/unified/compare/build8193.6...build8193.7</a></p>
<h2><a class="anchor" id="autotoc_md59"></a>
Added</h2>
<ul>
<li>Events: Added OnUUIDCollision event to UUIDEvents</li>
<li>Core: <code>NWNX_CORE_LOG_ASYNC</code> variable to asynchronously flush the nwnx log to disk</li>
<li>Core: <code>NWNX_CORE_LOG_DATE</code> variable to add the date in Y-M-D format to the timestamp. Timestamps must be enabled. Default: Off</li>
<li>Tweaks: <code>NWNX_TWEAKS_ITEM_CHARGES_COST_MODE</code> to revert the cost of items with charges to 1.69 values</li>
<li>Core: <code>NWNX_CORE_NWNX_RESOURCE_DIRECTORY_PATH</code> variable to override the default path of the UserDirectory/nwnx folder</li>
</ul>
<h4><a class="anchor" id="autotoc_md60"></a>
New Plugins</h4>
<ul>
<li>Optimizations: Tweaks that (potentially) improve performance<ul>
<li>AsyncLogFlush to asynchronously flush the game log to disk</li>
<li>GameObjectLookup to speed up ObjectID to pointer lookups</li>
<li>ObjectTagLookup to speed GetObjectByTag() and similar functions</li>
</ul>
</li>
</ul>
<h4><a class="anchor" id="autotoc_md61"></a>
New NWScript Functions</h4>
<ul>
<li>Player: SetResManOverride()</li>
<li>Creature: {Get|Set}{Domain|Specialization}()</li>
<li>Util: SetInstructionLimit()</li>
<li>Area: CreateGenericTrigger()</li>
<li>Object: GetPositionIsInTrigger()</li>
</ul>
<h2><a class="anchor" id="autotoc_md62"></a>
Changed</h2>
<ul>
<li>ELC: Updated for custom spellcaster changes</li>
<li>Events: exposed TARGET and TYPE event data for DMActionEvent DumpLocals</li>
<li>Tweaks: added temporary fix for server freeze when learning a spell from a scroll (NWNX_TWEAKS_FIX_SCROLL_LEARNING_BUG)</li>
<li>Events: OnStealthExit will no longer fire if OnStealthEnter was skipped</li>
</ul>
<h2><a class="anchor" id="autotoc_md63"></a>
Deprecated</h2>
<ul>
<li>Creature: {Get|Set}{ClericDomain|WizardSpecialization}()</li>
</ul>
<h2><a class="anchor" id="autotoc_md64"></a>
Fixed</h2>
<ul>
<li>Tweaks: Fixed bug that prevented sneak attacks on flanked creatures when using NWNX_TWEAKS_SNEAK_ATTACK_IGNORE_CRIT_IMMUNITY</li>
<li>Webhook: fixed a crash that would happen when trying to send a message in the shutdown script</li>
<li>Core: POS is now saved for characters who were online when the server was shut down</li>
<li>Core: Fixed issue where POS would occasionally get corrupted and print errors to the log</li>
<li>ServerLogRedirector: Fixed dropped prefixes when using PrintString()</li>
</ul>
<h1><a class="anchor" id="autotoc_md65"></a>
8193.6</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.5...build8193.6">https://github.com/nwnxee/unified/compare/build8193.5...build8193.6</a></p>
<h4><a class="anchor" id="autotoc_md66"></a>
New NWScript Functions</h4>
<ul>
<li>Object: {Get|Set|Delete}{Int|String|Float}()</li>
<li>Object: DeleteVarRegex()</li>
<li>Util: AddNSSFile()</li>
<li>Util: RemoveNWNXResourceFile()</li>
</ul>
<h2><a class="anchor" id="autotoc_md67"></a>
Changed</h2>
<ul>
<li>Object: Renamed {Get|Set|Delete}Persistent{Int|String|Float}() to {Get|Set|Delete}{Int|String|Float}() and added a parameter to the latter to allow persisting of variables on a case-by-case basis</li>
<li>Util: <code>NWNX_UTIL_PRE_MODULE_START_SCRIPT_CHUNK</code> will now provide an error message if it fails to run a script chunk</li>
</ul>
<h2><a class="anchor" id="autotoc_md68"></a>
Deprecated</h2>
<ul>
<li>Object: {Get|Set|Delete}Persistent{Int|String|Float}()</li>
</ul>
<h1><a class="anchor" id="autotoc_md69"></a>
8193.5</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.4...build8193.5">https://github.com/nwnxee/unified/compare/build8193.4...build8193.5</a></p>
<h2><a class="anchor" id="autotoc_md70"></a>
Added</h2>
<h4><a class="anchor" id="autotoc_md71"></a>
New NWScript Functions</h4>
<ul>
<li>Administration: ReloadRules() (DANGER, DRAGONS)</li>
</ul>
<h2><a class="anchor" id="autotoc_md72"></a>
Changed</h2>
<ul>
<li>Core: NWNX now also checks the build revision of nwserver-linux when starting.</li>
</ul>
<h2><a class="anchor" id="autotoc_md73"></a>
Fixed</h2>
<ul>
<li>Tweaks: DisablePause works yet again, woo.</li>
</ul>
<h1><a class="anchor" id="autotoc_md74"></a>
8193.4</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.3...build8193.4">https://github.com/nwnxee/unified/compare/build8193.3...build8193.4</a></p>
<h2><a class="anchor" id="autotoc_md75"></a>
Added</h2>
<h4><a class="anchor" id="autotoc_md76"></a>
New NWScript Functions</h4>
<ul>
<li>Object: {Get|Set|Delete}Persistent{Int|String|Float}()</li>
</ul>
<h2><a class="anchor" id="autotoc_md77"></a>
Changed</h2>
<ul>
<li>Tweaks: SneakAttackCritImmunity now takes <code>FLANK_LEVEL_RANGE</code> ruleset.2da setting into account</li>
</ul>
<h1><a class="anchor" id="autotoc_md78"></a>
8193.3</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.2...build8193.3">https://github.com/nwnxee/unified/compare/build8193.2...build8193.3</a></p>
<h2><a class="anchor" id="autotoc_md79"></a>
Added</h2>
<ul>
<li>Events: Added skippable {Lock|Unlock} events to ObjectEvents</li>
<li>Player: GetLanguage() function</li>
</ul>
<h2><a class="anchor" id="autotoc_md80"></a>
Changed</h2>
<ul>
<li>DotNET: C# API has moved from using <code>NWN.Object</code> to plain <code>uint</code> for NWScript <code>object</code> type</li>
</ul>
<h2><a class="anchor" id="autotoc_md81"></a>
Fixed</h2>
<ul>
<li>ELC: RDDs now pass NWNX_ELC</li>
</ul>
<h1><a class="anchor" id="autotoc_md82"></a>
8193.2</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193.1...build8193.2">https://github.com/nwnxee/unified/compare/build8193.1...build8193.2</a></p>
<h2><a class="anchor" id="autotoc_md83"></a>
Changed</h2>
<ul>
<li>Per Object Storage can now be persisted to GFF. The following variables will now persist: <code>NWNX_Player!ALWAYS_WALK</code>, <code>NWNX_Player!REST_DURATION</code>, , <code>NWNX_Player!REST_ANIMATION</code>, <code>NWNX_Creature!WALK_RATE_CAP</code>, <code>NWNX_Chat!HEARING_DISTANCE*</code>, <code>NWNX_Damage!*_EVENT_SCRIPT</code>, <code>NWNX_Feedback!*</code>, <code>NWNX_Reveal!*</code>, <code>NWNX_SkillRanks!SKILLRANK_MOD_*</code>. This means you no longer need to re-apply these to your players and objects after every restart.</li>
</ul>
<h1><a class="anchor" id="autotoc_md84"></a>
8193.1</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8193...build8193.1">https://github.com/nwnxee/unified/compare/build8193...build8193.1</a></p>
<p>Note: Some nwscript files have changed. You will need to update them and recompile all scripts.</p>
<h2><a class="anchor" id="autotoc_md85"></a>
Added</h2>
<h4><a class="anchor" id="autotoc_md86"></a>
New NWScript Functions</h4>
<ul>
<li>Area: GetMusicIsPlaying()</li>
<li>Player: GetPlatformId()</li>
</ul>
<h2><a class="anchor" id="autotoc_md87"></a>
Changed</h2>
<ul>
<li>Core: NWNX will now provide you with better error messages when you try to call a NWScript NWNX function and you haven't updated your nwnx_*.nss files or the plugin is not loaded.</li>
<li>We no longer have separate build types (except for symbols and compiler optimizations). All builds now include error messaging and handling.</li>
</ul>
<h2><a class="anchor" id="autotoc_md88"></a>
Fixed</h2>
<ul>
<li>Fixed an issue where the <code>cwd</code> value was garbled, causing plugin load to fail unless <code>NWNX_CORE_LOAD_PATH</code> was set.</li>
</ul>
<h1><a class="anchor" id="autotoc_md89"></a>
8193</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8186-lts...build8193">https://github.com/nwnxee/unified/compare/build8186-lts...build8193</a></p>
<p>NWNX has moved to 64bit. This is a major change, with many breaking changes listed below, so please examine them carefully.</p>
<p>NOTE: There may be more breaking changes added here until the next official release happens.</p>
<h2><a class="anchor" id="autotoc_md90"></a>
Added</h2>
<ul>
<li>Core: Added the environment variable <code>NWNX_CORE_ALLOW_NWNX_FUNCTIONS_IN_EXECUTE_SCRIPT_CHUNK</code> to enable NWNX function calls in ExecuteScriptChunk(), by default these will be blocked</li>
<li>Core: NWNX will now create a <code>/nwnx</code> folder in your UserDirectory, its resman priority is slightly below the <code>/development</code> folder. Currently it's used by <a class="el" href="group__object.html#ga091bdd0e7c99ed5254ca138db05d7156" title="Export an object to the UserDirectory/nwnx folder.">NWNX_Object_Export()</a> and <a class="el" href="group__util.html#gabe413b0610a460dfc310fafc1149ba6d" title="Compiles and adds a script to the UserDirectory/nwnx folder, or to the location of sAlias.">NWNX_Util_AddScript()</a> to place their objects/scripts in.</li>
<li>Core: Added the environment variable <code>NWNX_CORE_CLEAN_UP_NWNX_RESOURCE_DIRECTORY</code>, setting this to true will delete all contents in the <code>/nwnx</code> folder on startup of the server. Default: false</li>
<li>Core: Added the environment variable <code>NWNX_CORE_NWNX_RESOURCE_DIRECTORY_PRIORITY</code> which lets you change the resman priority of the <code>/nwnx</code> folder. Default: 70000000</li>
<li>Core: Added the following console commands: <code>runscript</code>, <code>eval</code>, <code>evalx</code>, <code>loglevel</code>, <code>logformat</code><ul>
<li><code>runscript &lt;scriptname&gt;</code>: Executes the given nwscript. Example: <code>runscript dm_killallplayers</code></li>
<li><code>eval &lt;script chunk&gt;</code>: Executes the given nwscript chunk. Example: <code>eval ApplyEffectToObject(DURATION_TYPE_INSTANT, EffectDeath(), GetFirstPC());</code></li>
<li><code>evalx &lt;script chunk&gt;</code>: Executes the given nwscript chunk, this command already includes all nwnx headers available in the module. Example: <code>evalx <a class="el" href="group__admin.html#ga637a42678c8d730015dba00efddef6aa" title="Signals the server to immediately shut down.">NWNX_Administration_ShutdownServer()</a>;</code></li>
<li><code>loglevel &lt;plugin&gt; [&lt;loglevel&gt;]</code>: Sets or gets the log level of the given plugin. Example: Set: <code>loglevel Events 7</code>, Get: <code>loglevel Events</code></li>
<li><code>logformat [timestamp|notimestamp] [plugin|noplugin] [source|nosource] [color|nocolor] [force|noforce]</code>: Control the output format of logs. Example: <code>logformat color timestamp noplugin nosource</code></li>
</ul>
</li>
<li>Core: Added the following log related environment variables: <code>NWNX_CORE_LOG_TIMESTAMP</code>, <code>NWNX_CORE_LOG_PLUGIN</code>, <code>NWNX_CORE_LOG_SOURCE</code>, <code>NWNX_CORE_LOG_COLOR</code>, <code>NWNX_CORE_LOG_FORCE_COLOR</code></li>
<li>Util: Added the environment variable <code>NWNX_UTIL_PRE_MODULE_START_SCRIPT_CHUNK</code> which lets you set a nwscript chunk that runs before the OnModuleLoad event</li>
</ul>
<h4><a class="anchor" id="autotoc_md91"></a>
New Plugins</h4>
<p>The following plugins were added:</p><ul>
<li><b>DotNET</b>: Implement your server scripts in C# (and other dotnet languages)</li>
</ul>
<h4><a class="anchor" id="autotoc_md92"></a>
New NWScript Functions</h4>
<ul>
<li>Administration: {Get|Set}DebugValue()</li>
<li>Creature: {Get|Set}Disarmable()</li>
<li>Data: Array_Set()</li>
<li>Dialog: End()</li>
<li>Object: Export()</li>
<li>Player: PossessCreature()</li>
<li>Util: AddScript()</li>
<li>Util: GetNSSContents()</li>
<li>Weapon: GetWeaponFinesseSize()</li>
</ul>
<h2><a class="anchor" id="autotoc_md93"></a>
Changed</h2>
<ul>
<li>Administration: DeleteTURD() now returns TRUE on success</li>
<li>Data: Array_Insert() will now actually do an insert instead of a set</li>
<li>Effect: Removed the EffectID parameter from the struct</li>
<li>ELC: Updated with the new ruleset changes</li>
<li>Events: <code>NWNX_ON_ITEM_INVENTORY_{ADD|REMOVE}_ITEM_*</code> has been changed to <code>NWNX_ON_INVENTORY_{ADD|REMOVE}_ITEM_*</code></li>
<li>Itemproperty: Removed the EffectID parameter from the struct</li>
<li>SQL: The SQLite database extension has been changed to <code>.sqlite3nwnxee</code></li>
</ul>
<h2><a class="anchor" id="autotoc_md94"></a>
Removed</h2>
<ul>
<li>The following plugins were removed: JVM, Mono</li>
<li>Administration: BootPC()</li>
<li>Experimental: RemoveACABModifiersFromExpertise</li>
<li>Object: {Get|Set}EventHandler(), {Get|Set}Portrait()</li>
<li>Player: {Get|Set}VisibilityOverride()</li>
<li>Util: GenerateUUID()</li>
</ul>
<h1><a class="anchor" id="autotoc_md95"></a>
8186 LTS</h1>
<p><a href="https://github.com/nwnxee/unified/compare/build8186-2...build8186-lts">https://github.com/nwnxee/unified/compare/build8186-2...build8186-lts</a></p>
<p>NOTICE: The ABI has changed, please make sure to update your <a class="el" href="nwnx_8nss.html">nwnx.nss</a> and recompile all your scripts.</p>
<h2><a class="anchor" id="autotoc_md96"></a>
Added</h2>
<ul>
<li>Added support to skip building certain plugins by setting an environment variable, for example: <code>NWNX_SKIP_PLUGINS="JVM;Lua;Mono;Ruby;SpellChecker"</code></li>
<li>Added support to build out of tree plugins with the following environment variable: <code>NWNX_ADDITIONAL_PLUGINS=/path/to/Plugin1;/path/to/Plugin2</code></li>
<li>Added string localization support. Only Russian/Cyrillic supported at the moment. Use environment variable <code>NWNX_CORE_LOCALE=ru</code></li>
<li>Core: Allow changing default plugin state from 'load all' to 'skip all' with the following environment variable: <code>NWNX_CORE_SKIP_ALL=y</code>. Use <code>NWNX_PLUGIN_SKIP=n</code> to enable specific plugins in this case.</li>
<li>Core: Allow passing engine structures to nwnx (Effect/Itemproperty)</li>
<li>Core: Added the environment variable <code>NWNX_CORE_SHUTDOWN_SCRIPT=scriptname</code> which lets you set a nwscript that runs when the server shuts down</li>
<li>Core: Added Util functions to call various script events</li>
<li>Core: NWNX will now log the resref of areas it's trying to load when running log level <code>7</code></li>
<li>Events: New events: SkillEvents, MapEvents, EffectEvents, QuickChatEvents, InventoryEvents, BarterEvents, TrapEvents, TimingBarEvents, LevelEvents, WebHookEvents</li>
<li>Events: The following events are now skippable: FeatEvents, ItemEvents, HealersKitEvents, CombatModeEvents, PartyEvents, SkillEvents, MapEvents, PolymorphEvents, DMActionEvents, ClientConnectEvents, SpellEvents, QuickChatEvents, InventoryEvents, BarterEvents (START only), TrapEvents, StickyPlayerNameReservedEvent, StealthEvent</li>
<li>Events: You can now get the current event name with a nwscript function</li>
<li>Events: Added On{Listen/Spot}Detection events to StealthEvents</li>
<li>Events: Added On{Un}Polymorph events as PolymorphEvents</li>
<li>Events: Added Event Data for SpawnObject, GiveItem, GiveAlignment, Heal, Kill, ToggleInvulnerabilty, ForceRest, Limbo, ToggleAI, ToggleImmortal, Goto, Possess, PossessFullPower, ToggleLock, DisableTrap, JumpToPoint, JumpTargetToPoint, JumpAllPlayersToPoint, ChangeDifficulty, ViewInventory, SpawnTrapOnObject events in DMActionEvents</li>
<li>Events: Added OnClientConnect events that fire before the player sees the server vault.</li>
<li>Events: Added ItemInventory{Open/Close}, ItemInventory{Add/Remove}Item, ScrollLearn, DestroyObject and DecrementStackSize events to ItemEvents</li>
<li>Events: Added {Set|Clear}MemorizedSpellSlot events to SpellEvents</li>
<li>Events: Added AmmoReload events that are used when the engine is looking for ammunition to reload</li>
<li>Events: Added Run{Un}Equip events to ItemEvents</li>
<li>Events: Added Barter Start/End events</li>
<li>Events: Added AIAction{Disarm|Examine|Flag|Recover|Set}Trap events</li>
<li>Events: Added Timing Bar events</li>
<li>Events: Added Sticky Player Name Reserved event allowing builders to use another method instead of knownservernames.2da to validate player names and cd keys</li>
<li>Events: Added Level{Up|UpAutomatic|Down} events to LevelEvents</li>
<li>Events: Added WebHook Success/Failure events with rate limit feedback</li>
<li>Events: Added UseLoreOnItem and PayToIdentifyItem events</li>
<li>Events: Added {Add|Remove}Gold events to InventoryEvents</li>
<li>Events: Added PVP Attitude Change event</li>
<li>Events: Added SplitItem event to ItemEvents</li>
<li>Events: Added WalkToWaypoint, AttackObject and ForceMoveToObject events to InputEvents</li>
<li>Events: Added Surface Material Change events</li>
<li>Profiler: Support profiler perf scopes via nwscript</li>
<li>SQL: Added support for SQLite</li>
<li>Tweaks: DisableQuickSave</li>
<li>Tweaks: HideDMsOnCharList</li>
<li>Tweaks: DisableMonkAbilitiesWhenPolymorphed</li>
<li>Tweaks: StringToIntBaseToAuto</li>
<li>Tweaks: DeadCreatureFiresOnAreaExit</li>
<li>Tweaks: PreserveActionsOnDMPossess</li>
<li>Tweaks: FixGreaterSanctuaryBug</li>
<li>Weapon: Feat and Base Item names were added to LOG_INFO feedback</li>
<li>WebHook: Added support for richer Slack-compatible messages</li>
<li>Util: Added the environment variable <code>NWNX_UTIL_PRE_MODULE_START_SCRIPT=scriptname</code> which lets you set a nwscript that runs before the OnModuleLoad event </li>
</ul>
<h4><a class="anchor" id="autotoc_md97"></a>
New Plugins</h4>
<p>The following plugins were added:</p><ul>
<li><b>Appearance</b>: Allows the appearance and some other things of creatures to be overridden per player</li>
<li><b>Area</b>: Adds functions exposing additional area properties</li>
<li><b>CombatModes</b>: Allows subscribing to Combat Mode toggle events. The Events plugin is needed to subscribe to the CombatMode events</li>
<li><b>Effect</b>: Provides various utility functions to manipulate builtin effect types</li>
<li><b>Experimental</b>: Adds experimental functionality that's not really useful for the general user. The following environmental variable needs to be true for the plugin to load: <code>NWNX_CORE_LOAD_EXPERIMENTAL_PLUGIN=y</code></li>
<li><b>ELC</b>: A customisable replacement for ValidateCharacter: ELC &amp; ILR</li>
<li><b>Encounter</b>: Adds functions exposing additional encounter properties</li>
<li><b>Feedback</b>: Allows combatlog, feedback and 'quest journal updated' messages to be hidden globally or per player</li>
<li><b>ItemProperty</b>: Provides various utility functions to manipulate builtin itemproperty types</li>
<li><b>MaxLevel</b>: Extends support for levels up to 60</li>
<li><b>Race</b>: Provides the ability to specify a variety of inate modifiers for new or existing races or subraces via script or 2da</li>
<li><b>Regex</b>: Adds functions to search and replace strings using regular expressions.</li>
<li><b>Rename</b>: Adds functions to facilitate renaming, overriding and customization of player names</li>
<li><b>Reveal</b>: Adds functions to allow the selective revealing of a stealthed character to another character or their party.</li>
<li><b>SkillRanks</b>: Adds functions to create feats and perform actions that manipulate the calculations of skill ranks</li>
<li><b>Visibility</b>: Allows the visibility of objects to be overridden globally or per player </li>
</ul>
<h4><a class="anchor" id="autotoc_md98"></a>
New NWScript Functions</h4>
<ul>
<li>Administration: GetPlayOption()</li>
<li>Administration: SetPlayOption()</li>
<li>Administration: DeleteTURD()</li>
<li>Appearance: {Get|Set}Override()</li>
<li>Area: GetNumberOfPlayersInArea()</li>
<li>Area: GetLastEntered()</li>
<li>Area: GetLastLeft()</li>
<li>Area: GetPVPSetting()</li>
<li>Area: SetPVPSetting()</li>
<li>Area: GetAreaSpotModifier()</li>
<li>Area: SetAreaSpotModifier()</li>
<li>Area: GetAreaListenModifier()</li>
<li>Area: SetAreaListenModifier()</li>
<li>Area: GetNoRestingAllowed()</li>
<li>Area: SetNoRestingAllowed()</li>
<li>Area: GetWindPower()</li>
<li>Area: SetWindPower()</li>
<li>Area: GetWeatherChance()</li>
<li>Area: SetWeatherChance()</li>
<li>Area: GetFogClipDistance()</li>
<li>Area: SetFogClipDistance()</li>
<li>Area: GetShadowOpacity()</li>
<li>Area: SetShadowOpacity()</li>
<li>Area: GetDayNightCycle()</li>
<li>Area: SetDayNightCycle()</li>
<li>Area: {Get|Set}SunMoonColors()</li>
<li>Area: CreateTransition()</li>
<li>Area: {Get|Set}TileAnimationLoop()</li>
<li>Area: TestDirectLine()</li>
<li>Chat: GetChatHearingDistance()</li>
<li>Chat: SetChatHearingDistance()</li>
<li>Creature: GetAttackBonus()</li>
<li>Creature: GetHighestLevelOfFeat()</li>
<li>Creature: GetFeatRemainingUses()</li>
<li>Creature: GetFeatTotalUses()</li>
<li>Creature: SetFeatRemainingUses()</li>
<li>Creature: GetTotalEffectBonus()</li>
<li>Creature: SetOriginalName()</li>
<li>Creature: GetOriginalName()</li>
<li>Creature: SetSpellResistance()</li>
<li>Creature: GetPrePolymorphAbilityScore()</li>
<li>Creature: {Get|Set}MovementRateFactor()</li>
<li>Creature: Set{AnimalCompanion|Familiar}CreatureType()</li>
<li>Creature: Set{AnimalCompanion|Familiar}Name()</li>
<li>Damage: SetAttackEventScript()</li>
<li>Damage: GetAttackEventData()</li>
<li>Damage: SetAttackEventData()</li>
<li>Damage: DealDamage()</li>
<li>Effect: PackEffect()</li>
<li>Effect: UnpackEffect()</li>
<li>Effect: SetEffectExpiredScript()</li>
<li>Effect: GetEffectExpiredData()</li>
<li>Effect: GetEffectExpiredCreator()</li>
<li>Encounter: GetNumberOfCreaturesInEncounterList()</li>
<li>Encounter: GetEncounterCreatureByIndex()</li>
<li>Encounter: SetEncounterCreatureByIndex()</li>
<li>Encounter: GetFactionId()</li>
<li>Encounter: SetFactionId()</li>
<li>Encounter: GetPlayerTriggeredOnly()</li>
<li>Encounter: SetPlayerTriggeredOnly()</li>
<li>Encounter: GetResetTime()</li>
<li>Encounter: SetResetTime()</li>
<li>ELC: SetELCScript()</li>
<li>ELC: EnableCustomELCCheck()</li>
<li>ELC: SkipValidationFailure()</li>
<li>ELC: GetValidationFailureType()</li>
<li>ELC: GetValidationFailureSubType()</li>
<li>ELC: GetValidationFailureMessageStrRef()</li>
<li>ELC: SetValidationFailureMessageStrRef()</li>
<li>ELC: GetValidationFailureItem();</li>
<li>ELC: GetValidationFailureLevel();</li>
<li>ELC: GetValidationFailureSkillID();</li>
<li>ELC: GetValidationFailureFeatID();</li>
<li>ELC: GetValidationFailureSpellID();</li>
<li>Events: GetCurrentEvent()</li>
<li>Events: ToggleDispatchListMode()</li>
<li>Events: AddObjectToDispatchList()</li>
<li>Events: RemoveObjectFromDispatchList()</li>
<li>Feedback: Get{Feedback|CombatLog|JournalUpdated}MessageHidden()</li>
<li>Feedback: Set{Feedback|CombatLog|JournalUpdated}MessageHidden()</li>
<li>Feedback: Set{Feedback|CombatLog}MessageMode()</li>
<li>Item: GetBaseArmorClass()</li>
<li>Item: GetMinEquipLevel()</li>
<li>ItemProperty: PackIP()</li>
<li>ItemProperty: UnpackIP()</li>
<li>Object: GetHasVisualEffect()</li>
<li>Object: CheckFit()</li>
<li>Object: GetDamageImmunity()</li>
<li>Object: AddToArea()</li>
<li>Object: GetPlaceableIsStatic()</li>
<li>Object: SetPlaceableIsStatic()</li>
<li>Object: {Get|Set}AutoRemoveKey()</li>
<li>Object: {Get|Set}TriggerGeometry()</li>
<li>Object: {Add|Remove}IconEffect()</li>
<li>Player: ShowVisualEffect()</li>
<li>Player: ForcePlaceableInventoryWindow()</li>
<li>Player: MusicBackgroundChangeDay()</li>
<li>Player: MusicBackgroundChangeNight()</li>
<li>Player: MusicBackgroundStart()</li>
<li>Player: MusicBackgroundStop()</li>
<li>Player: MusicBattleChange()</li>
<li>Player: MusicBattleStart()</li>
<li>Player: MusicBattleStop()</li>
<li>Player: PlaySound()</li>
<li>Player: SetPlaceableUsable()</li>
<li>Player: SetRestDuration()</li>
<li>Player: ApplyInstantVisualEffectToObject()</li>
<li>Player: UpdateCharacterSheet()</li>
<li>Player: OpenInventory()</li>
<li>Player: GetAreaExplorationState()</li>
<li>Player: SetAreaExplorationState()</li>
<li>Player: SetRestAnimation()</li>
<li>Player: SetObjectVisualTransformOverride()</li>
<li>Player: ApplyLoopingVisualEffectToObject()</li>
<li>Player: SetPlaceableNameOverride()</li>
<li>Player: GetQuestCompleted()</li>
<li>Player: SetPersistentLocation()</li>
<li>Player: UpdateItemName()</li>
<li>Race: SetRacialModifier()</li>
<li>Race: GetParentRace()</li>
<li>Regex: Search()</li>
<li>Regex: Replace()</li>
<li>Rename: SetPCNameOverride()</li>
<li>Rename: GetPCNameOverride()</li>
<li>Rename: ClearPCNameOverride()</li>
<li>Reveal: RevealTo()</li>
<li>Reveal: SetRevealToParty()</li>
<li>SkillRanks: GetSkillFeat()</li>
<li>SkillRanks: GetSkillFeatCountForSkill()</li>
<li>SkillRanks: GetSkillFeatForSkillByIndex()</li>
<li>SkillRanks: SetSkillFeat()</li>
<li>SkillRanks: SetSkillFeatFocusModifier()</li>
<li>SkillRanks: GetBlindnessPenalty()</li>
<li>SkillRanks: SetBlindnessPenalty()</li>
<li>SkillRanks: GetAreaModifier()</li>
<li>SkillRanks: SetAreaModifier()</li>
<li>Util: GenerateUUID()</li>
<li>Util: GetCustomToken()</li>
<li>Util: GetEnvironmentVariable()</li>
<li>Util: EffectToItemProperty()</li>
<li>Util: ItemPropertyToEffect()</li>
<li>Util: StripColors()</li>
<li>Util: IsValidResRef()</li>
<li>Util: GetMinutesPerHour()</li>
<li>Util: SetMinutesPerHour()</li>
<li>Util: EncodeStringForURL()</li>
<li>Util: Get2DARowCount()</li>
<li>Util: Get{First|Next}ResRef()</li>
<li>Util: GetServerTicksPerSecond()</li>
<li>Util: GetLastCreatedObject()</li>
<li>Visibility: GetVisibilityOverride()</li>
<li>Visibility: SetVisibilityOverride()</li>
<li>Weapon: SetWeaponIsMonkWeapon()</li>
</ul>
<h2><a class="anchor" id="autotoc_md99"></a>
Changed</h2>
<ul>
<li>Core: The nwnx.txt logfile will now be written to the UserDirectory</li>
<li>Chat: LOG_DEBUG suppresses player to player tell specifics</li>
<li>Item: SetWeight now recomputes the possessor's encumbrance</li>
<li>Docker: Set default log level to 6</li>
<li>Docker: Skip all plugins except ServerLogRedirector by default</li>
<li>Redis: Lots of stuff, be sure to update the redis nwscripts!</li>
<li>Events: Changed <code>NUM_LEVELS</code> to <code>AMOUNT</code> for DMActionEvent GiveLevel</li>
<li>Player: StartGuiTimingBar() now accepts a type for pre-defined text</li>
</ul>
<h2><a class="anchor" id="autotoc_md100"></a>
Deprecated</h2>
<ul>
<li>Player: {Get/Set}VisibilityOverride() are deprecated, please use the new Visibility plugin!</li>
<li>Object: {Get/Set}Portrait() are deprecated, please use the native {Get/Set}PortraitResRef() functions instead!</li>
</ul>
<h2><a class="anchor" id="autotoc_md101"></a>
Removed</h2>
<ul>
<li>The following plugins were removed: Names, BehaviourTree</li>
</ul>
<h2><a class="anchor" id="autotoc_md102"></a>
Fixed</h2>
<ul>
<li>Administration: Fixed a nullptr crash in Get{DM/Player}Password()</li>
<li>Chat: Fix recursive message skipping</li>
<li>Object: GetLocalVariable and GetLocalVariableCount now work with Area and Module object</li>
<li>Events: DMActionEvents now return valid TARGET event data</li>
<li>Core: Serialization now stores locals and effects for all objects, instead of only items </li>
</ul>
</div></div><!-- contents -->
</div><!-- PageDoc -->
</div><!-- doc-content -->
<!-- start footer part -->
		<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
			<ul>
				<li class="footer">
					Generated on Sat Jan 16 2021 21:41:13 for NWNX:EE by <a href="http://www.doxygen.org/index.html">
					<img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.17.
					<a href="dark/">Dark version</a>
				</li>
			</ul>
		</div>
		<script src="custom.js"></script>
	</body>
</html>
